<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>People</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    input[type="text"] { padding: 8px; width: 280px; }
    button { padding: 8px 12px; margin-left: 6px; }
    table { border-collapse: collapse; width: 700px; margin-top: 14px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { text-align: left; }
    a { text-decoration: none; }
    a:hover { text-decoration: underline; }
    .row { display: flex; gap: 12px; align-items: center; }
    .muted { color: #666; font-size: 0.9em; }
  </style>
</head>
<body>
  <h1>Add a person</h1>

  <form method="POST" action="/">
    <div class="row">
      <input type="text" name="name" placeholder="Type a name..." required />
      <button type="submit">Add</button>
    </div>
  </form>

  <form method="POST" action="/reset" onsubmit="return confirm('Clear all people?');" style="margin-top:10px;">
    <button type="submit">Reset list</button>
  </form>

  <h2>People</h2>

  {% if people %}
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Name (click)</th>
          <th>Note preview</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        {% for p in people %}
          <tr>
            <td>{{ p.id }}</td>
            <td>
              <a href="{{ url_for('person_detail', person_id=p.id) }}">{{ p.name }}</a>
            </td>
            <td class="muted">
              {% if p.note %}
                {{ (p.note[:80] ~ ('…' if p.note|length > 80 else '')) }}
              {% else %}
                —
              {% endif %}
            </td>
            <td class="muted">{{ p.created_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No people yet. Add one above.</p>
  {% endif %}
</body>
</html>